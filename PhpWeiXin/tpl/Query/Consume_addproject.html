<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>添加项目</title>
    <meta name="description" content="爱养车" />
    <link href="/tpl/static/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <link href="/tpl/static/lib/ligerUI/skins/Gray2014/css/all.css" rel="stylesheet" />
    <script src="/tpl/static/lib/jquery/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="/tpl/static/lib/ligerUI/js/ligerui.all.js" type="text/javascript"></script>
    <script src="/tpl/static/lib/json2.js" type="text/javascript"></script>
    <script type="text/javascript">
        var tree = null;
        var tabItems = [];
        $(function () {
            //布局
            $("#layout1").ligerLayout({ leftWidth: 150, height: '100%', space: 2});
            tree=$("#tree1").ligerTree({
                url:'/index.php?g=Query&m=Consume&a=addproject',
                checkbox: false,
                slide: false,
                nodeWidth: 120,
                attribute: ['nodename', 'url'],
                onSelect: function (node) {
                    alert(node);
                }
            });
            var project = $("#projectgrid").ligerGrid({
                height: '42%',
                width: '100%',
                columns: [
                { display: '项目编号', name: '项目编号', minWidth: 140 },
                { display: '项目名称', name: '项目名称', minWidth: 160 },
                { display: '维修工艺', name: '维修工艺', minWidth: 120 },
                { display: '标准工时', name: '标准工时', minWidth: 120 },
                { display: '标准金额', name: '标准金额', minWidth: 120 },
                { display: '三包工时', name: '三包工时', minWidth: 120 },
                { display: '三包金额', name: '三包金额', minWidth: 120 },
                { display: '保险工时', name: '保险工时', minWidth: 120 },
                { display: '保险金额', name: '保险金额', minWidth: 120 },
                { display: '提成方式', name: '提成方式', minWidth: 120 },
                { display: '提成比率', name: '提成比率', minWidth: 120 },
                { display: '提成工时', name: '提成工时', minWidth: 120 },
                { display: '提成金额', name: '提成金额', minWidth: 120 },
                { display: '考核工时', name: '考核工时', minWidth: 120 },
                { display: '考核金额', name: '考核金额', minWidth: 120 },
                { display: '备注', name: '备注', minWidth: 240 }
                ],
                url: '/index.php?g=Query&m=Consume&a=getprojectbyname',
                pageSize: 4,
                rownumbers: true,
                isScroll: true,
                toolbar: {
                    items: [
                    {
                        text: '增加',
                        click: function () {
                            alert('1');
                        }, icon: 'ad icon iconfont icon-dingdanguanli'
                    },
                    { line: true },
                    { text: '派工', click: null, icon: 'memeber' },
                    { line: true },
                    { text: '修改', click: null, icon: 'modify' },
                    { line: true },
                    { text: '删除', click: null, icon: 'delete' }
                    ]
                }
            });            var haveproject = $("#haveproject").ligerGrid({
                height: '32%',
                width: '100%',
                columns: [
                { display: '项目编号', name: '项目编号', minWidth: 140 },
                { display: '项目名称', name: '项目名称', minWidth: 160 },
                { display: '结算方式', name: '结算方式', minWidth: 120 },
                { display: '工时', name: '工时', minWidth: 120 },
                { display: '金额', name: '金额', minWidth: 120 },
                { display: '折扣', name: '折扣', minWidth: 120 },
                { display: '税率', name: '税率', minWidth: 120 },
                { display: '虚增类别', name: '虚增类别', minWidth: 120 },
                { display: '虚增金额', name: '虚增金额', minWidth: 120 },
                { display: '备注', name: '备注', minWidth: 240 }
                ],
                url: '/index.php?g=Query&m=Consume&a=getproject',
                pageSize: 6,
                rownumbers: true,
                isScroll: true,
            });            var form = $("#form1").ligerForm({
                inputWidth: 90, labelWidth: 65, space:3,
                validate: true,
                buttons: [                    { text: "更新", width: 60 }                ],                fields: [
                    { display: "流水号", name: "流水号", newline: true, type: "hidden" },
                    { display: "结算方式 ", name: "结算方式", newline: true, type: "text" },
                    { display: "工时 ", name: "工时", newline: false, type: "text" },
                    { display: "金额 ", name: "金额", newline: false, type: "text" },
                    { display: "折扣", name: "折扣", newline: false, type: "text" },
                    { display: "税率", name: "税率", newline: true, type: "text" },
                    {
                        display: "虚增类别", name: "虚增类别", newline: false, type: "combobox",
                        options: {
                            valueField: '车型',
                            textField: '车型',
                            autocomplete: true,
                            url: '/index.php?g=Query&m=Consume&a=getchexing',
                        },

                    },

                    { display: "虚增金额", name: "虚增金额", newline: false, type: "text" },
                    { display: "备注", name: "备注", newline: false, type: "text" },

                ]
            });

        });

        function getQueryString(name) {
            var now_url = document.location.search.slice(1), q_array = now_url.split('&');
            for (var i = 0; i < q_array.length; i++) {
                var v_array = q_array[i].split('=');
                if (v_array[0] == name) {
                    return v_array[1];
                }
            }
            return false;
        }
    </script>
</head>

<body style="padding:0;margin:0">
    <div id="layout1" style="padding:0;margin:0">
        <div position="left" title="项目类别"  style="padding:0;margin:0" >
            <ul id="tree1" style="margin-top:3px;" />
        </div>
        <div position="center" id="framecenter"  style="padding:0;margin:0">
         <div id="projectgrid" style="margin:0; padding:0"></div>
         <div id="form1" style="margin:0; padding:0;height:24%"></div>
         <div id="haveproject" style="margin:0;margin-bottom:2px; padding:0"></div>
        </div>

    </div>

</body>
</html>
